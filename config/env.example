# =============================================================================
# AIVoiceTranslator Environment Configuration Template
# =============================================================================
# Copy this file to .env in the project root and update with your actual values
# cp config/env.example .env

# -----------------------------------------------------------------------------
# Server Configuration
# -----------------------------------------------------------------------------
PORT=5000
DEFAULT_PORT=3001
HOST=localhost
NODE_ENV=development
LOG_LEVEL=info

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
DATABASE_URL=postgres://username:password@host:port/database?sslmode=require
REALTIME_TRANSPORT=websocket
COMMUNICATION_PROTOCOL=websocket

# -----------------------------------------------------------------------------
# API Keys (Premium Services)
# -----------------------------------------------------------------------------
# OpenAI API Key - Required for premium STT, Translation, and TTS services
OPENAI_API_KEY=your_openai_api_key_here

# ElevenLabs API Key - Required for premium STT, TTS, and Voice Isolation services
ELEVENLABS_API_KEY=your_elevenlabs_api_key_here

# -----------------------------------------------------------------------------
# Service Tier Configuration (4-Tier Architecture)
# -----------------------------------------------------------------------------

# STT (Speech-to-Text) Service Tier
# Default: 'auto' (4-tier fallback: premium-openai → premium-labs → free-hq → free-enhanced → free-basic)
# Available options:
#   - 'auto'             = Auto-fallback through all tiers
#   - 'premium-openai'   = Tier 1a: OpenAI STT (requires OPENAI_API_KEY)
#   - 'premium-labs'     = Tier 1b: ElevenLabs STT (requires ELEVENLABS_API_KEY)
#   - 'free-hq'          = Tier 2: Deepgram Nova-2 (free, high quality)
#   - 'free-enhanced'    = Tier 3: Whisper.cpp + Voice Isolation (local + enhancement)
#   - 'free-basic'       = Tier 4: Whisper.cpp Basic (local processing)
STT_SERVICE_TYPE=auto

# Translation Service Tier
# Default: 'auto' (4-tier fallback: premium → free-hq → free-basic → offline)
# Available options:
#   - 'auto'         = Auto-fallback through all tiers
#   - 'premium'      = Tier 1: OpenAI Translation (requires OPENAI_API_KEY)
#   - 'free-hq'      = Tier 2: DeepSeek Translation (free, high quality)
#   - 'free-basic'   = Tier 3: MyMemory Translation (free, basic)
#   - 'offline'      = Tier 4: Offline Translation (no network required)
TRANSLATION_SERVICE_TYPE=auto

# TTS (Text-to-Speech) Service Tier
# Default: 'auto' (4-tier fallback: premium-labs → premium-openai → free-hq → free-basic → silent)
# Available options:
#   - 'auto'             = Auto-fallback through all tiers
#   - 'premium-labs'     = Tier 1a: ElevenLabs TTS (requires ELEVENLABS_API_KEY)
#   - 'premium-openai'   = Tier 1b: OpenAI TTS (requires OPENAI_API_KEY)
#   - 'free-hq'          = Tier 2: Local eSpeak-NG (local processing, 41 languages)
#   - 'free-basic'       = Tier 3: Browser TTS (client-side Web Speech API)
#   - 'silent'           = Tier 4: Silent mode (no audio output)
TTS_SERVICE_TYPE=auto

# Client URLs (for local dev builds)
VITE_API_URL=http://localhost:5000
VITE_WS_URL=ws://localhost:5000

# -----------------------------------------------------------------------------
# Whisper Configuration
# -----------------------------------------------------------------------------
# Whisper Model for local processing (used in free-enhanced and free-basic tiers)
# Available options: 'tiny', 'base', 'small', 'medium', 'large'
WHISPER_MODEL=base

# -----------------------------------------------------------------------------
# Session Management Configuration
# -----------------------------------------------------------------------------
# Session timeout configurations (in milliseconds)
SESSION_VERY_SHORT_THRESHOLD_MS=30000
SESSION_STALE_TIMEOUT_MS=1800000
SESSION_ALL_STUDENTS_LEFT_TIMEOUT_MS=300000
SESSION_EMPTY_TEACHER_TIMEOUT_MS=600000
SESSION_CLEANUP_INTERVAL_MS=120000
TEACHER_RECONNECTION_GRACE_PERIOD_MS=600000

# Classroom code configuration
CLASSROOM_CODE_EXPIRATION_MS=1800000
CLASSROOM_CODE_CLEANUP_INTERVAL_MS=300000

# Audio processing configuration
MIN_AUDIO_DATA_LENGTH=1024
MIN_AUDIO_BUFFER_LENGTH=512

# Message timing configuration
SESSION_EXPIRED_MESSAGE_DELAY_MS=2000
INVALID_CLASSROOM_MESSAGE_DELAY_MS=1500

# Health check configuration
HEALTH_CHECK_INTERVAL_MS=30000

# Logging configuration
LOG_TEXT_PREVIEW_LENGTH=100

# -----------------------------------------------------------------------------
# Advanced Features
# -----------------------------------------------------------------------------
# Enable detailed translation logging for debugging
ENABLE_DETAILED_TRANSLATION_LOGGING=false

# Feature Flags (Runtime)
# Two-way communication (student requests + teacher replies) - default off
FEATURE_TWO_WAY_COMMUNICATION=false
FEATURE_MANUAL_TRANSLATION_CONTROL=false

# Live comprehension indicators (student signals like "need slower") - default off
FEATURE_LIVE_COMPREHENSION_INDICATORS=false

# Low literacy mode (icon-forward UI, auto caption TTS client-side) - default off
FEATURE_LOW_LITERACY_MODE=false

# Classroom modes (lecture/pair/group broadcast notifications) - default off
FEATURE_CLASSROOM_MODES=false

# Redaction features (server-side)
# Redact profanity in delivered captions/audio text
FEATURE_REDACT_PROFANITY=false
# Redact simple PII (emails/phones) in delivered captions/audio text
FEATURE_REDACT_PII=false

# ACE master feature flag
FEATURE_ACE=false

# Server interim transcription (off by default)
FEATURE_SERVER_INTERIM_TRANSCRIPTION=0

# Include original teacher-language audio with translations (off by default)
FEATURE_INCLUDE_ORIGINAL_TTS=0

# Test timing scale for development (not used in production)
# TEST_TIMING_SCALE=1.0

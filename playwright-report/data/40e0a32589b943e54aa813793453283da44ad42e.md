# Test info

- Name: Analytics Dashboard E2E Tests >> should display all control buttons
- Location: /Users/yamijala/gitprojects/AIVoiceTranslator/tests/e2e/diagnostics.spec.ts:28:3

# Error details

```
Error: page.goto: Target page, context or browser has been closed
Call log:
  - navigating to "http://127.0.0.1:5000/diagnostics.html", waiting until "load"

    at /Users/yamijala/gitprojects/AIVoiceTranslator/tests/e2e/diagnostics.spec.ts:8:16
```

# Test source

```ts
   1 | import { test, expect, Page } from '@playwright/test';
   2 |
   3 | test.describe('Analytics Dashboard E2E Tests', () => {
   4 |   let page: Page;
   5 |
   6 |   test.beforeEach(async ({ browser }) => {
   7 |     page = await browser.newPage();
>  8 |     await page.goto('/diagnostics.html');
     |                ^ Error: page.goto: Target page, context or browser has been closed
   9 |   });
   10 |
   11 |   test.afterEach(async () => {
   12 |     await page.close();
   13 |   });
   14 |
   15 |   test('should load the analytics dashboard', async () => {
   16 |     // Check page title
   17 |     await expect(page).toHaveTitle('Analytics Dashboard - AIVoiceTranslator');
   18 |     
   19 |     // Check main heading
   20 |     const heading = page.locator('h1');
   21 |     await expect(heading).toContainText('Analytics Dashboard');
   22 |     
   23 |     // Check subtitle
   24 |     const subtitle = page.locator('.subtitle');
   25 |     await expect(subtitle).toContainText('Real-time usage metrics and adoption analytics');
   26 |   });
   27 |
   28 |   test('should display all control buttons', async () => {
   29 |     // Check refresh button
   30 |     const refreshBtn = page.locator('#refresh-btn');
   31 |     await expect(refreshBtn).toBeVisible();
   32 |     await expect(refreshBtn).toContainText('üîÑ Refresh Data');
   33 |     
   34 |     // Check export button
   35 |     const exportBtn = page.locator('#export-btn');
   36 |     await expect(exportBtn).toBeVisible();
   37 |     await expect(exportBtn).toContainText('üì• Export Data');
   38 |     
   39 |     // Check auto-refresh button
   40 |     const autoRefreshBtn = page.locator('#auto-refresh-btn');
   41 |     await expect(autoRefreshBtn).toBeVisible();
   42 |     await expect(autoRefreshBtn).toContainText('‚è∞ Auto-refresh: OFF');
   43 |   });
   44 |
   45 |   test('should display all metric sections', async () => {
   46 |     // Check Product Adoption Metrics section
   47 |     const adoptionSection = page.locator('.section-header:has-text("Product Adoption Metrics")');
   48 |     await expect(adoptionSection).toBeVisible();
   49 |     
   50 |     // Check Usage Analytics section
   51 |     const usageSection = page.locator('.section-header:has-text("Usage Analytics")');
   52 |     await expect(usageSection).toBeVisible();
   53 |     
   54 |     // Check Performance Metrics section
   55 |     const performanceSection = page.locator('.section-header:has-text("Performance & Quality Metrics")');
   56 |     await expect(performanceSection).toBeVisible();
   57 |     
   58 |     // Check Recent Activity section
   59 |     const activitySection = page.locator('.section-header:has-text("Recent Session Activity")');
   60 |     await expect(activitySection).toBeVisible();
   61 |   });
   62 |
   63 |   test('should load and display metrics data', async () => {
   64 |     // Wait for metrics to load
   65 |     await page.waitForSelector('.metric-card', { timeout: 5000 });
   66 |     
   67 |     // Check that metric cards are displayed
   68 |     const metricCards = page.locator('.metric-card');
   69 |     await expect(metricCards).toHaveCount(6); // 3 adoption + 3 performance
   70 |     
   71 |     // Check specific metric cards
   72 |     await expect(page.locator('.metric-card:has-text("Total Sessions")')).toBeVisible();
   73 |     await expect(page.locator('.metric-card:has-text("Active Users")')).toBeVisible();
   74 |     await expect(page.locator('.metric-card:has-text("Translation Volume")')).toBeVisible();
   75 |     await expect(page.locator('.metric-card:has-text("System Health")')).toBeVisible();
   76 |     await expect(page.locator('.metric-card:has-text("Audio Generation")')).toBeVisible();
   77 |     await expect(page.locator('.metric-card:has-text("Real-time Performance")')).toBeVisible();
   78 |   });
   79 |
   80 |   test('should refresh data when refresh button is clicked', async () => {
   81 |     // Wait for initial load
   82 |     await page.waitForSelector('#last-updated', { timeout: 5000 });
   83 |     
   84 |     // Get initial last updated time
   85 |     const lastUpdated = page.locator('#last-updated');
   86 |     const initialTime = await lastUpdated.textContent();
   87 |     
   88 |     // Click refresh button
   89 |     await page.click('#refresh-btn');
   90 |     
   91 |     // Wait a moment for the refresh to process
   92 |     await page.waitForTimeout(500);
   93 |     
   94 |     // Check that last updated time exists
   95 |     const newTime = await lastUpdated.textContent();
   96 |       expect(newTime).toContain('Last updated:');
   97 |   });
   98 |
   99 |   test('should toggle auto-refresh', async () => {
  100 |     const autoRefreshBtn = page.locator('#auto-refresh-btn');
  101 |     
  102 |     // Initially should be OFF
  103 |     await expect(autoRefreshBtn).toContainText('‚è∞ Auto-refresh: OFF');
  104 |     
  105 |     // Click to enable
  106 |     await autoRefreshBtn.click();
  107 |     
  108 |     // Check for 'Enabled' state text or class if available, e.g.,
```
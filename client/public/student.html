<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Interface - AIVoiceTranslator</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🎧</text></svg>">
    <script>
      // Runtime configuration for both development and production
      if (typeof window !== 'undefined') {
        // Try to get from environment variables (will be replaced by Vite in production)
        let apiUrl = '__VITE_API_URL__';
        let wsUrl = '__VITE_WS_URL__';
        
        // Check if we're in development (placeholders not replaced)
        if (apiUrl === '__VITE_API_URL__' || wsUrl === '__VITE_WS_URL__') {
          // Development fallback - detect current host
          const protocol = window.location.protocol;
          const hostname = window.location.hostname;
          const port = '5000'; // Server port
          
          if (hostname === 'localhost' || hostname === '127.0.0.1') {
            // Local development
            apiUrl = `${protocol}//${hostname}:${port}`;
            wsUrl = protocol === 'https:' ? `wss://${hostname}:${port}` : `ws://${hostname}:${port}`;
          } else {
            // Development on remote host (like Replit)
            apiUrl = `${protocol}//${hostname}`;
            wsUrl = protocol === 'https:' ? `wss://${hostname}` : `ws://${hostname}`;
          }
          console.log('[student.html] Using development URLs');
        } else {
          console.log('[student.html] Using production URLs');
        }
        
        window.VITE_API_URL = apiUrl;
        window.VITE_WS_URL = wsUrl;
        console.log('[student.html] VITE_API_URL set to:', window.VITE_API_URL);
        console.log('[student.html] VITE_WS_URL set to:', window.VITE_WS_URL);
      }
    </script>
    <link rel="stylesheet" href="css/student.css">
</head>
<body>
    <div class="container">
        <h1>🎧 Student Interface</h1>
        
        <div id="connection-status" class="status disconnected">
            <div class="indicator disconnected"></div>
            <span>Disconnected</span>
        </div>
        
        <!-- Language Selection with Categories -->
        <div class="language-section">
            <h3>🌍 Select Your Language</h3>
            <div class="language-selection">
                <select id="language-dropdown" class="language-dropdown">
                    <option value="">Choose your language...</option>
                    
                    <!-- Major Languages -->
                    <option value="en-US">🇺🇸 English (United States)</option>
                    <option value="en-GB">🇬🇧 English (United Kingdom)</option>
                    <option value="en-AU">🇦🇺 English (Australia)</option>
                    <option value="en-CA">🇨🇦 English (Canada)</option>
                    
                    <!-- European Languages -->
                    <option value="es-ES">🇪🇸 Spanish (Spain)</option>
                    <option value="es-MX">🇲🇽 Spanish (Mexico)</option>
                    <option value="es-AR">🇦🇷 Spanish (Argentina)</option>
                    <option value="fr-FR">🇫🇷 French (France)</option>
                    <option value="fr-CA">🇨🇦 French (Canada)</option>
                    <option value="de-DE">🇩🇪 German (Germany)</option>
                    <option value="it-IT">🇮🇹 Italian (Italy)</option>
                    <option value="pt-PT">🇵🇹 Portuguese (Portugal)</option>
                    <option value="pt-BR">🇧🇷 Portuguese (Brazil)</option>
                    <option value="ru-RU">🇷🇺 Russian (Russia)</option>
                    <option value="pl-PL">🇵🇱 Polish (Poland)</option>
                    <option value="nl-NL">🇳🇱 Dutch (Netherlands)</option>
                    <option value="sv-SE">🇸🇪 Swedish (Sweden)</option>
                    <option value="da-DK">🇩🇰 Danish (Denmark)</option>
                    <option value="no-NO">🇳🇴 Norwegian (Norway)</option>
                    <option value="fi-FI">🇫🇮 Finnish (Finland)</option>
                    <option value="is-IS">🇮🇸 Icelandic (Iceland)</option>
                    <option value="hu-HU">🇭🇺 Hungarian (Hungary)</option>
                    <option value="cs-CZ">🇨🇿 Czech (Czech Republic)</option>
                    <option value="sk-SK">🇸🇰 Slovak (Slovakia)</option>
                    <option value="sl-SI">🇸🇮 Slovenian (Slovenia)</option>
                    <option value="hr-HR">🇭🇷 Croatian (Croatia)</option>
                    <option value="sr-RS">🇷🇸 Serbian (Serbia)</option>
                    <option value="bg-BG">🇧🇬 Bulgarian (Bulgaria)</option>
                    <option value="ro-RO">🇷🇴 Romanian (Romania)</option>
                    <option value="el-GR">🇬🇷 Greek (Greece)</option>
                    <option value="tr-TR">🇹🇷 Turkish (Turkey)</option>
                    
                    <!-- Asian Languages -->
                    <option value="zh-CN">🇨🇳 Chinese (Simplified)</option>
                    <option value="zh-TW">🇹🇼 Chinese (Traditional)</option>
                    <option value="ja-JP">🇯🇵 Japanese (Japan)</option>
                    <option value="ko-KR">🇰🇷 Korean (Korea)</option>
                    <option value="hi-IN">🇮🇳 Hindi (India)</option>
                    <option value="bn-IN">🇮🇳 Bengali (India)</option>
                    <option value="ta-IN">🇮🇳 Tamil (India)</option>
                    <option value="te-IN">🇮🇳 Telugu (India)</option>
                    <option value="mr-IN">🇮🇳 Marathi (India)</option>
                    <option value="gu-IN">🇮🇳 Gujarati (India)</option>
                    <option value="kn-IN">🇮🇳 Kannada (India)</option>
                    <option value="ml-IN">🇮🇳 Malayalam (India)</option>
                    <option value="pa-IN">🇮🇳 Punjabi (India)</option>
                    <option value="ur-PK">🇵🇰 Urdu (Pakistan)</option>
                    <option value="th-TH">🇹🇭 Thai (Thailand)</option>
                    <option value="vi-VN">🇻🇳 Vietnamese (Vietnam)</option>
                    <option value="id-ID">🇮🇩 Indonesian (Indonesia)</option>
                    <option value="ms-MY">🇲🇾 Malay (Malaysia)</option>
                    <option value="tl-PH">🇵🇭 Filipino (Philippines)</option>
                    
                    <!-- Middle Eastern & African Languages -->
                    <option value="ar-SA">🇸🇦 Arabic (Saudi Arabia)</option>
                    <option value="ar-EG">🇪🇬 Arabic (Egypt)</option>
                    <option value="ar-AE">🇦🇪 Arabic (UAE)</option>
                    <option value="he-IL">🇮🇱 Hebrew (Israel)</option>
                    <option value="fa-IR">🇮🇷 Persian (Iran)</option>
                    <option value="sw-KE">🇰🇪 Swahili (Kenya)</option>
                    <option value="am-ET">🇪🇹 Amharic (Ethiopia)</option>
                    <option value="zu-ZA">🇿🇦 Zulu (South Africa)</option>
                    <option value="af-ZA">🇿🇦 Afrikaans (South Africa)</option>
                    
                    <!-- Other Languages -->
                    <option value="cy-GB">🏴󐁧󐁢󐁷󐁬󐁳󐁿 Welsh (Wales)</option>
                    <option value="ga-IE">🇮🇪 Irish (Ireland)</option>
                    <option value="mt-MT">🇲🇹 Maltese (Malta)</option>
                    <option value="lv-LV">🇱🇻 Latvian (Latvia)</option>
                    <option value="lt-LT">🇱🇹 Lithuanian (Lithuania)</option>
                    <option value="et-EE">🇪🇪 Estonian (Estonia)</option>
                    <option value="mk-MK">🇲🇰 Macedonian (North Macedonia)</option>
                    <option value="sq-AL">🇦🇱 Albanian (Albania)</option>
                    <option value="eu-ES">🏴󐁧󐁢󐁢󐁡󐁳󐁿 Basque (Spain)</option>
                    <option value="ca-ES">🏴󐁧󐁢󐁣󐁡󐁴󐁿 Catalan (Spain)</option>
                    <option value="gl-ES">🏴󐁧󐁢󐁧󐁬󐁣󐁿 Galician (Spain)</option>
                </select>
            </div>
            
            <div id="selected-language" style="margin-top: 15px; font-weight: bold; color: #2196f3;">
                No language selected
            </div>
        </div>
        
        <!-- Translation Display -->
        <div class="translation-container">
            <h3>📖 Live Translation</h3>
            <div id="translation-display" class="translation-box">
                Waiting for teacher to start speaking...
            </div>
        </div>
        
        <!-- Audio Controls -->
        <div class="audio-controls">
            <button id="play-button" disabled>🔊 Play Audio</button>
            <label for="volume-control">Volume:</label>
            <input type="range" id="volume-control" min="0" max="1" step="0.1" value="0.8">
        </div>
        
        <!-- Connection Controls -->
        <div class="controls">
            <button id="connect-btn">Connect to Session</button>
        </div>
    </div>

    <script src="js/student.js" defer></script>
</body>
</html>

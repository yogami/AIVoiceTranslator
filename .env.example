# AIVoiceTranslator Environment Configuration
# Copy this file to .env and update with your values

# ===== REQUIRED CONFIGURATION =====

# OpenAI API Key (required for translation features)
# Get your API key from: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-your-openai-api-key-here

# ===== SERVER CONFIGURATION (Optional) =====

# Server port (default: 5000)
PORT=

# Hostname or IP address (default: localhost)
HOST=

# Node environment (development, production, test)
NODE_ENV=development

# Session secret for encryption (generate a random string)
SESSION_SECRET=your-random-session-secret-here

# Log level for application (default: info)
LOG_LEVEL=info

# ===== DATA STORAGE =====

# PostgreSQL connection URL (required for database storage)
# Format: postgresql://username:password@host:port/database
# Example: postgresql://postgres:password@localhost:5432/aivoicetranslator
DATABASE_URL=

# ===== FRONTEND CONFIGURATION (Vite) =====
# API and WebSocket URLs for frontend to connect to backend
VITE_API_URL=http://localhost:5000
VITE_WS_URL=ws://localhost:5000

# ===== SESSION TIMEOUT CONFIGURATION (Optional) =====
# All values are in milliseconds. If not set, defaults based on NODE_ENV will be used.

# How long a teacher-only session must exist before being considered "real" 
# (shorter sessions are ended immediately on disconnect)
# Default: 5000ms (5 seconds) in production, 1000ms (1 second) in test
SESSION_VERY_SHORT_THRESHOLD_MS=5000

# How long before inactive sessions are cleaned up
# Default: 5400000ms (90 minutes) in production, 30000ms (30 seconds) in test  
SESSION_STALE_TIMEOUT_MS=5400000

# Grace period after all students leave before ending session
# Default: 600000ms (10 minutes) in production, 5000ms (5 seconds) in test
SESSION_ALL_STUDENTS_LEFT_TIMEOUT_MS=600000

# How long teacher-only sessions wait for students before cleanup
# Default: 900000ms (15 minutes) in production, 3000ms (3 seconds) in test
SESSION_EMPTY_TEACHER_TIMEOUT_MS=900000

# ===== ADVANCED SESSION CONFIGURATION (Optional) =====

# How often the cleanup service runs to check for stale sessions
# Default: 120000ms (2 minutes) in production, 1000ms (1 second) in test
SESSION_CLEANUP_INTERVAL_MS=120000

# How long classroom codes remain valid before expiring
# Default: 7200000ms (2 hours) in production, 15000ms (15 seconds) in test
CLASSROOM_CODE_EXPIRATION_MS=7200000

# How often expired classroom codes are cleaned up
# Default: 900000ms (15 minutes) in production, 3000ms (3 seconds) in test
CLASSROOM_CODE_CLEANUP_INTERVAL_MS=900000

# How often WebSocket health checks (pings) are sent
# Default: 30000ms (30 seconds) in production, 2000ms (2 seconds) in test
HEALTH_CHECK_INTERVAL_MS=30000

# Grace period for teacher reconnection to existing sessions
# Default: 300000ms (5 minutes) in production, 3000ms (3 seconds) in test
TEACHER_RECONNECTION_GRACE_PERIOD_MS=300000

# Minimum audio data length for processing (bytes)
# Default: 100 bytes for both production and test
MIN_AUDIO_DATA_LENGTH=100

# Minimum audio buffer length for processing (bytes)  
# Default: 100 bytes for both production and test
MIN_AUDIO_BUFFER_LENGTH=100

# Delay before closing connection after session expired message (milliseconds)
# Default: 1000ms (1 second) in production, 50ms in test
SESSION_EXPIRED_MESSAGE_DELAY_MS=1000

# Delay before closing connection after invalid classroom message (milliseconds)
# Default: 100ms for both production and test
INVALID_CLASSROOM_MESSAGE_DELAY_MS=100

# Length of text preview in log messages (characters)
# Default: 100 characters for both production and test
LOG_TEXT_PREVIEW_LENGTH=100

# How often to run session cleanup checks
# Default: 120000ms (2 minutes) in production, 5000ms (5 seconds) in test
SESSION_CLEANUP_INTERVAL_MS=120000

# How long classroom codes remain valid
# Default: 7200000ms (2 hours) in production, 30000ms (30 seconds) in test
CLASSROOM_CODE_EXPIRATION_MS=7200000

# How often to clean up expired classroom codes
# Default: 900000ms (15 minutes) in production, 10000ms (10 seconds) in test
CLASSROOM_CODE_CLEANUP_INTERVAL_MS=900000

# How often to send health check pings to WebSocket clients
# Default: 30000ms (30 seconds) in production, 5000ms (5 seconds) in test
HEALTH_CHECK_INTERVAL_MS=30000

# All environment variables must be set explicitly. No defaults or localhost allowed.
# Example values below must be replaced for your environment.

# PORT=
# HOST=
# DATABASE_URL=
# OPENAI_API_KEY=
# VITE_API_URL=
# VITE_WS_URL=

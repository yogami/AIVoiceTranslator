# Test environment variables
# All environment variables must be set explicitly for test environment. No defaults or localhost allowed.
# Example values below must be replaced for your environment.

NODE_ENV=test
LOG_LEVEL=info
PORT=5001
HOST=127.0.0.1
VITE_API_URL=http://127.0.0.1:5001
VITE_WS_URL=ws://127.0.0.1:5001
PLAYWRIGHT_BASE_URL=http://127.0.0.1:5001
# Supabase PostgreSQL database for testing (currently unreachable - connection timeout)
# DATABASE_URL=postgresql://postgres:A12azwVwd1JeT5yG@db.rbvjzsasjrnycvphispd.supabase.co:5432/postgres?sslmode=disable

# Aiven PostgreSQL database for testing (functional and accessible)
DATABASE_URL=postgres://avnadmin:AVNS_Gr-3uSaTzidPW5i1EcP@pg-2a0a4062-aivoicetranslator.d.aivencloud.com:26621/defaultdb?sslmode=require

# Disabled - Using Neon Database (paid plan required)
# DATABASE_URL_DISABLED=postgresql://test_user:test_pass@localhost:5432/testdb

# Disabled - old direct connection URLs (cleaned up)
# DATABASE_URL_DISABLED=postgresql://postgres:A12azwVwd1JeT5yG@db.rbvjzsasjrnycvphispd.supabase.co:5432/postgres
OPENAI_API_KEY=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
VITE_API_URL=http://127.0.0.1:5001
VITE_WS_URL=ws://127.0.0.1:5001
NODE_ENV=test
LOG_LEVEL=debug
REDIS_URL=redis://localhost:6379

# Communication Protocol Configuration  
COMMUNICATION_PROTOCOL=websocket

# E2E Test specific configurations
# Add any other test-specific variables below as needed
SESSION_SECRET=test-session-secret
TTS_SERVICE_TYPE=auto

# STT/Transcription Service Configuration  

# Translation Service Configuration
TRANSLATION_SERVICE_TYPE=auto

# Client-side timeout configurations for Vite (milliseconds)
# WebSocket settings
VITE_WS_MAX_RECONNECT_ATTEMPTS=5
VITE_WS_RECONNECT_DELAY_MS=300

# Audio recording settings  
VITE_SPEECH_RECOGNITION_RESTART_DELAY_MS=10
VITE_MOCK_AUDIO_DATA_DELAY_MS=15

# UI interaction timeouts
VITE_ELEMENT_VISIBILITY_TIMEOUT_MS=1000
VITE_CONNECTION_STATUS_TIMEOUT_MS=1000
VITE_TEACHER_REGISTRATION_TIMEOUT_MS=1000
VITE_RECORD_BUTTON_TIMEOUT_MS=500
VITE_SPEECH_RECOGNITION_UNAVAILABLE_TIMEOUT_MS=300
VITE_WAIT_TIMEOUT_MS=100
VITE_SHORT_WAIT_TIMEOUT_MS=50
VITE_ADJUSTABLE_WAIT_TIMEOUT_MS=150

# E2E Test timeout configurations (milliseconds)
# Playwright settings
PLAYWRIGHT_SERVER_STARTUP_TIMEOUT_MS=12000

# Test UI interaction timeouts
TEST_ELEMENT_VISIBILITY_TIMEOUT_MS=1000
TEST_CONNECTION_STATUS_TIMEOUT_MS=1000  
TEST_TEACHER_REGISTRATION_TIMEOUT_MS=1000
TEST_RECORD_BUTTON_TIMEOUT_MS=500
TEST_SPEECH_RECOGNITION_UNAVAILABLE_TIMEOUT_MS=300

# Test wait timeouts
TEST_SHORT_WAIT_MS=50
TEST_STANDARD_WAIT_MS=100
TEST_ADJUSTABLE_WAIT_MS=150

# Test mock timeouts
TEST_MOCK_AUDIO_DATA_DELAY_MS=15

# Integration Test Timing Configuration (milliseconds)
# All values will be automatically scaled by TEST_TIMING_SCALE
TEST_CONNECTION_TIMEOUT_MS=10000
TEST_MESSAGE_TIMEOUT_MS=60000
TEST_WEBSOCKET_READY_TIMEOUT_MS=3000
TEST_SERVER_STARTUP_DELAY_MS=1000
TEST_SERVER_SHUTDOWN_DELAY_MS=500
TEST_CLEANUP_DELAY_MS=500
TEST_LONG_WAIT_MS=1000
TEST_RECONNECTION_WAIT_MS=1000
TEST_DATABASE_SYNC_WAIT_MS=100
TEST_STORAGE_OPERATION_TIMEOUT_MS=2000
TEST_TRANSLATION_TIMEOUT_MS=10000
TEST_TTS_TIMEOUT_MS=8000
TEST_AUDIO_PROCESSING_TIMEOUT_MS=5000
TEST_SESSION_GRACE_PERIOD_MS=3000
TEST_UNIT_TIMEOUT_MS=5000
TEST_INTEGRATION_TIMEOUT_MS=30000
TEST_E2E_TIMEOUT_MS=60000
TEST_FALLBACK_TIMEOUT_MS=1000
TEST_ERROR_RECOVERY_DELAY_MS=500
TEST_RETRY_DELAY_MS=200

# Session management timeouts for test environment
# All timing values are automatically scaled down by a mathematical factor
# This preserves proportional relationships while making tests run faster
# Set TEST_TIMING_SCALE to override default scaling (0.01 = 100x faster)
TEST_TIMING_SCALE=0.01

# Override session lifecycle timeouts to prevent premature session ending in tests
# These values will be automatically scaled by TEST_TIMING_SCALE
SESSION_VERY_SHORT_THRESHOLD_MS=50000
SESSION_STALE_TIMEOUT_MS=5400000
SESSION_ALL_STUDENTS_LEFT_TIMEOUT_MS=180000
SESSION_EMPTY_TEACHER_TIMEOUT_MS=18000000
SESSION_CLEANUP_INTERVAL_MS=30000
CLASSROOM_CODE_EXPIRATION_MS=1800000
CLASSROOM_CODE_CLEANUP_INTERVAL_MS=60000
HEALTH_CHECK_INTERVAL_MS=15000
TEACHER_RECONNECTION_GRACE_PERIOD_MS=90000
SESSION_EXPIRED_MESSAGE_DELAY_MS=300
INVALID_CLASSROOM_MESSAGE_DELAY_MS=50

# Non-timing configurations remain the same
MIN_AUDIO_DATA_LENGTH=50
MIN_AUDIO_BUFFER_LENGTH=50
LOG_TEXT_PREVIEW_LENGTH=50
ENABLE_DETAILED_TRANSLATION_LOGGING=true

# STT/Speech-to-Text auto-fallback configuration
STT_SERVICE_TYPE=auto
WHISPER_MODEL=base

# ElevenLabs API Key for TTS auto-fallback (optional for testing)
ELEVENLABS_API_KEY=sk_3060e913f8d0bf9439d9d4d0af7227e49e086d6cef550c01
